<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>performAnalyses — performAnalyses • bhmbasket</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="performAnalyses — performAnalyses"><meta property="og:description" content="This function performs the analysis of simulated or observed trial data with the
specified methods
and returns the quantiles of the posterior response rates"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bhmbasket</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.5.999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/reproduceExNex.html">Reproducing Parts of Neuenschwander et al. (2016)</a>
    </li>
    <li>
      <a href="../articles/Running_bhmbasket_on_HPC.html">Running bhmbasket on HPC</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>performAnalyses</h1>

    <div class="hidden name"><code>performAnalyses.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function performs the analysis of simulated or observed trial data with the
specified methods
and returns the quantiles of the posterior response rates</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">performAnalyses</span><span class="op">(</span></span>
<span>  <span class="va">scenario_list</span>,</span>
<span>  evidence_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="fl">0.05</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">0.95</span>, <span class="fl">0.975</span><span class="op">)</span>,</span>
<span>  method_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"berry"</span>, <span class="st">"exnex"</span>, <span class="st">"exnex_adj"</span>, <span class="st">"pooled"</span>, <span class="st">"stratified"</span><span class="op">)</span>,</span>
<span>  target_rates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  prior_parameters_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calc_differences <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_mcmc_iterations <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  n_cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-scenario-list">scenario_list<a class="anchor" aria-label="anchor" href="#arg-scenario-list"></a></dt>
<dd><p>An object of class <code>scenario_list</code>,
as e.g. created with <code><a href="simulateScenarios.html">simulateScenarios</a></code></p></dd>


<dt id="arg-evidence-levels">evidence_levels<a class="anchor" aria-label="anchor" href="#arg-evidence-levels"></a></dt>
<dd><p>A vector of numerics in <code>(0, 1)</code> for the
<code>1-evidence_levels</code>-quantiles of the posterior response rates to be saved.
Default: <code>c(0.025, 0.05, 0.5, 0.8, 0.9, 0.95, 0.975)</code></p></dd>


<dt id="arg-method-names">method_names<a class="anchor" aria-label="anchor" href="#arg-method-names"></a></dt>
<dd><p>A vector of strings for the names of the methods to be used. Must
be one of the default values, Default: <code>c("berry", "exnex", "exnex_adj", "pooled", "stratified")</code></p></dd>


<dt id="arg-target-rates">target_rates<a class="anchor" aria-label="anchor" href="#arg-target-rates"></a></dt>
<dd><p>A vector of numerics in <code>(0, 1)</code> for the
target rates of each cohort, Default: <code>NULL</code></p></dd>


<dt id="arg-prior-parameters-list">prior_parameters_list<a class="anchor" aria-label="anchor" href="#arg-prior-parameters-list"></a></dt>
<dd><p>An object of class <code>prior_parameters_list</code>,
as e.g. created with <code><a href="getPriorParameters.html">getPriorParameters</a></code></p></dd>


<dt id="arg-calc-differences">calc_differences<a class="anchor" aria-label="anchor" href="#arg-calc-differences"></a></dt>
<dd><p>A matrix of positive integers with 2 columns.
For each row the differences will be calculated.
Also a vector of positive integers can be provided for a single difference.
The integers are the numbers for the cohorts to be subtracted from one another.
E.g. providing <code>c(2, 1)</code> calculates the difference between cohort <code>2</code> and cohort <code>1</code>.
If <code>NULL</code>, no subtractions are performed, Default: <code>NULL</code></p></dd>


<dt id="arg-n-mcmc-iterations">n_mcmc_iterations<a class="anchor" aria-label="anchor" href="#arg-n-mcmc-iterations"></a></dt>
<dd><p>A positive integer for the number of MCMC iterations,
see Details, Default: <code>10000</code>.
If <code>n_mcmc_iterations</code> is present in <code>.GlobalEnv</code> and <code>missing(n_mcmc_iterations)</code>,
the globally available value will be used.</p></dd>


<dt id="arg-n-cores">n_cores<a class="anchor" aria-label="anchor" href="#arg-n-cores"></a></dt>
<dd><p>Argument is deprecated and does nothing as of version 0.9.3.
A positive integer for the number of cores for the parallelization,
Default: <code>1</code></p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Argument is deprecated and does nothing as of version 0.9.3.
A numeric for the random seed, Default: <code>1</code></p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical indicating whether messages should be printed, Default: <code>TRUE</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An object of class <code>analysis_list</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function applies the following analysis models to (simulated) scenarios of class
<code>scenario_list</code>:</p><ul><li><p>Bayesian hierarchical model (BHM) proposed by Berry et al. (2013): <code>"berry"</code></p></li>
<li><p>BHM proposed by Neuenschwander et al. (2016): <code>"exnex"</code></p></li>
<li><p>BHM that combines above approaches: <code>"exnex_adj"</code></p></li>
<li><p>Pooled beta-binomial approach: <code>"pooled"</code></p></li>
<li><p>Stratified beta-binomial approach: <code>"stratified"</code></p></li>
</ul><p>The posterior distributions of the BHMs are approximated with Markov chain Monte Carlo (MCMC)
methods implemented in JAGS.
Two independent chains are used with each <code>n_mcmc_iterations</code> number of MCMC iterations.
The first <code>floor(n_mcmc_iterations / 3)</code> number of iterations are discarded as burn-in period.
No thinning is applied.</p>
<p>Note that the value for <code>n_mcmc_iterations</code> required for a good approximation of the posterior
distributions depends on the analysis model, the investigated scenarios, and the use case.
The default value might be a good compromise between run-time and approximation for
the estimation of decision probabilities, but
it should definitively be increased for the analysis of a single trial's outcome.</p>
<p>The analysis models will only be applied to the unique trial realizations across
all simulated scenarios.
The models can be applied in parallel by registering a parallel backend for the 'foreach'
framework, e.g. with <code><a href="https://doFuture.futureverse.org/reference/registerDoFuture.html" class="external-link">doFuture::registerDoFuture()</a></code> and <code>future::plan(future::multisession)</code>.
The parallelization is nested, so that the resources of a HPC environment can be used
efficiently.
For more on this topic, kindly see the respective vignette.
The tasks that are to be performed in parallel are chunked according to the number of workers
determined with <code><a href="https://rdrr.io/pkg/foreach/man/getDoParWorkers.html" class="external-link">foreach::getDoParWorkers()</a></code>.</p>
<p>The JAGS code for the BHM <code>"exnex"</code> was taken from Neuenschwander et al. (2016).
The JAGS code for the BHM <code>"exnex_adj"</code> is based on the JAGS code for <code>"exnex"</code>.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Berry, Scott M., et al. "Bayesian hierarchical modeling of patient subpopulations:
efficient designs of phase II oncology clinical trials."
<em>Clinical Trials</em> 10.5 (2013): 720-734.</p>
<p>Neuenschwander, Beat, et al. "Robust exchangeability designs
for early phase clinical trials with multiple strata."
<em>Pharmaceutical statistics</em> 15.2 (2016): 123-134.</p>
<p>Plummer, Martyn. "JAGS: A program for analysis of Bayesian graphical models
using Gibbs sampling."
<em>Proceedings of the 3rd international workshop on distributed statistical computing.</em>
Vol. 124. No. 125.10. 2003.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="simulateScenarios.html">simulateScenarios</a></code>
<code><a href="createTrial.html">createTrial</a></code>
<code><a href="getPriorParameters.html">getPriorParameters</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Stephan Wojciekowski</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="va">trial_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="createTrial.html">createTrial</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   n_subjects   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   n_responders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="va">analysis_list</span> <span class="op">&lt;-</span> <span class="fu">performAnalyses</span><span class="op">(</span></span></span>
<span class="r-in"><span>   scenario_list      <span class="op">=</span> <span class="va">trial_data</span>,</span></span>
<span class="r-in"><span>   target_rates       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   calc_differences   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   n_mcmc_iterations  <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Caution: No parallel backend detected for the 'foreach' framework. For execution in parallel, register a parallel backend, e.g. with:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    doFuture::registerDoFuture()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    future::plan(future::multisession)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 27-Jan-2026 Performing Analyses</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>          Analyzing 1 scenario (1 unique trial realization)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    13:30 - with Berry ...........</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>              finished after 0 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    13:30 - with Exnex ...........</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>              finished after 0 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    13:30 - with Exnex_adj .......</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>              finished after 0 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    13:30 - with Pooled ..........</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>              finished after 0 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>    13:30 - with Stratified ......</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>              finished after 0 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>          Processing scenarios ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>              finished after 0 secs.</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Stephan Wojciekowski.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

